# TVM Exit codes (TVM退出代码)

如果 TVM 以任意的 16 位无符号整数 `exit_code` 退出。如果 `exit_code` 大于 1，则被视为一个 _错误码_，因此以这样的代码退出可能导致交易回滚/反弹。 通常，您会看到Exit code `0xffff`（十进制形式为 65535）。这通常意味着合约不认识接收到的操作码。在编写合约时，开发人员自己设置的此代码。

## 标准退出码

:::info
标准退出码列表包含为 TON 区块链定义的所有通用 TVM 退出码。应在相应合约的源代码中寻找替代退出码。 Alternative exit codes should be sought in the source code of corresponded contract.
:::

| Exit code | TVM Phase     | 描述                                                                                                                                                                                                                                                                                                                                     |
| --------- | ------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `0`       | Compute Phase | 标准成功执行退出码。                                                                                                                                                                                                                                                                                                                             |
| `1`       | Compute Phase | 备选成功执行退出码。                                                                                                                                                                                                                                                                                                                             |
| `2`       | Compute Phase | Stack underflow. Last op-code consumed more elements than there are on the stacks. <sup>1</sup>                                                                                                                                                                                                        |
| `3`       | Compute Phase | Stack overflow. 栈上溢。在此版本的 TVM 中存储的值比允许的多。                                                                                                                                                                                                                                                                              |
| `4`       | Compute Phase | Integer overflow. 整数溢出。整数不适应于 −2<sup>256</sup> ≤ x < 2<sup>256</sup> 或发生了除零操作。                                                                                                                                                                                                                                         |
| `5`       | Compute Phase | 整数超出预期范围。                                                                                                                                                                                                                                                                                                                              |
| `6`       | Compute Phase | 额外代币不足。 无效的操作码。在当前 TVM 版本中，指令是未知的。                                                                                                                                                                                                                                                                                                     |
| `7`       | Compute Phase | Type check error. An argument to a primitive is of an incorrect value type. <sup>1</sup>                                                                                                                                                                                                               |
| `8`       | Compute Phase | Cell overflow. Writing to builder is not possible since after operation there would be more than 1023 bits or 4 references.                                                                                                                                                                            |
| `9`       | Compute Phase | Cell underflow. Read from slice primitive tried to read more bits or references than there are.                                                                                                                                                                                                        |
| `10`      | Compute Phase | Dictionary error. 字典错误。在字典（哈希映射）处理过程中发生错误。                                                                                                                                                                                                                                                                             |
| `11`      | Compute Phase | Most often caused by trying to call get-method whose id wasn't found in the code (missing `method_id` modifier or wrong get-method name specified when trying to call it). In [TVM docs](https://ton.org/tvm.pdf) its described as "Unknown error, may be thrown by user programs". |
| `12`      | Compute Phase | 由于被认为是不可能的情况而由 TVM 抛出。                                                                                                                                                                                                                                                                                                                 |
| `13`      | Compute Phase | Out of gas error. gas用尽错误。当剩余gas变为负数时，TVM 会抛出此错误。                                                                                                                                                                                                                                                                      |
| `-14`     | Compute Phase | It means out of gas error, same as `13`. 它表示gas用尽错误，与 `13` 相同。为负，因为它[无法伪造](https://github.com/ton-blockchain/ton/blob/20758d6bdd0c1327091287e8a620f660d1a9f4da/crypto/vm/vm.cpp#L492)。                                                                                                                                 |
| `32`      | Action Phase  | 操作列表无效。在 Action Phase，如果执行后的 c5 寄存器包含无法解析的对象，则设置此值。 Set during action phase if c5 register after execution contains unparsable object.                                                                                                                                                                                 |
| `-32`     | Action Phase  | (the same as prev 32) - Method ID not found. （与前面的 32 相同）- 未找到方法 ID。在尝试执行不存在的 get 方法时，TonLib 返回此值。                                                                                                                                                                                                  |
| `33`      | Action Phase  | 操作列表太长。                                                                                                                                                                                                                                                                                                                                |
| `34`      | Action Phase  | cell溢出。由于操作后将会有超过 1023 位或 4 个引用，因此无法写入构建器。 操作无效或不受支持。在 Action Phase，如果无法应用当前操作，则设置此值。                                                                                                                                                                                                                                                  |
| `35`      | Action Phase  | 出站消息中的源地址无效。                                                                                                                                                                                                                                                                                                                           |
| `36`      | Action Phase  | 出站消息中的目标地址无效。                                                                                                                                                                                                                                                                                                                          |
| `37`      | Action Phase  | Not enough TON. TON 不足。消息发送了过多的 TON（或在扣除费用后 TON 不足）。                                                                                                                                                                                                                                                                   |
| `38`      | Action Phase  | Not enough extra-currencies.                                                                                                                                                                                                                                                                                           |
| `40`      | Action Phase  | Not enough funds to process a message. 处理消息的资金不足。当只有足够的gas覆盖消息的一部分时，但不完全覆盖时，会抛出此错误。                                                                                                                                                                                                                                    |
| `43`      | Action Phase  | 超出库中的最大cell数或 Merkle 树的最大深度。                                                                                                                                                                                                                                                                                                           |

<sup>1</sup> 如果在 func 合约中遇到此类异常，这可能意味着汇编声明中存在类型错误。

:::info
Often you can see the exit code `0xffff` (65535 in decimal form). This usually means that the received opcode is unknown to the contract. When writing contracts, this code is set by the developer himself.
:::
