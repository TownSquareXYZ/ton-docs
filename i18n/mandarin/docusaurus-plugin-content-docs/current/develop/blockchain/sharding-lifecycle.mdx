# 无限阴影帕迪克

## 在 TON Blockchain 中了解拆分合并

TON (Telegram Open Network) Blockchain 为区块链的可扩展性和效率提出了创新概念。 其中一个概念是分割合并功能，这是其区块链结构的组成部分。 这篇短篇文章探讨了TON Blockchain中分割合并的关键方面，重点探讨了它在无限阴影寄生虫中的作用。

#### 无限阴影伞(ISP)及其应用

ISP支持TON Blockchain的设计，将每个账户视为其单独的“会计链”的一部分。 然后将这些会计链归入碎片区块，以提高效率。 一个小链的状态包括其所有会计链的各州。 因此，一个碎片块基本上是分配给它的虚拟帐户块集合。

- **ShardState**：接近于Hashmap(n, AccountState)，其中n是帐户的位长度。
- **ShardBlock**: 接近于Hashmap(n, AccountBlock)。

每个碎片链，或更确切地说，每个碎片区块都是由帐户的 `workchain_id` 和一个二进制前缀`s` 这两者结合在一起确定的。

## 碎片示例

![](/img/docs/blockchain-fundamentals/split-merge.svg)

在提供的图形方案中：

- 黑线代表着大师链。
- 工作链的碎片按时间划分，用黑破折线表示。
- 101、102、103和80个区块与带有seqno=29的大师链块有关。 这里有101张，102张和103张放在一张棚里，80张放在另一张棚里。
- 如果发生分割或合并事件，受影响的碎片将暂停到下一个主链块。

总之，TON Blockchain 中的分割合并是一个复杂而有效的机制，可以提高区块链网络内的可扩展性和互动。 它体现了TON在解决共同的区块链挑战方面的做法，强调了效率和全球一致性。

## 收藏详情

#### 拆分和非拆分构件

一个小区块和状态分为两个部分：

1. **分割零件**：使用ISP表单，包含特定帐户的数据。
2. **非分割部分**：涉及与方块与其他方块和外部世界的交互相关的数据。

#### 与其他方块的互动

不分割的部分对于确保全球的一致性至关重要，并应归纳为内部和外部的地方一致性条件。 它们具有重要意义：

- 在碎片链之间转发消息。
- 涉及多个碎片链的交易。
- 发送保证和验证块的初始状态与它的前身。

#### 接收和发送消息

27. 碎片链区块的非分割部分的关键组成部分包括：

- **InMsgDescr**：导入方块的所有消息的描述。
- **OutMsgDescr**：块导出或生成的所有消息的描述。

#### 阻止标题和验证器签名

区块头是另一个非拆分的组件，其中包含一些基本信息，如workchain_id、Account_id的二进制前缀以及各种哈希（例如前身的哈希）。 验证器签名被附加到未签名方块，形成已签名方块。

#### 发送消息队列

Shardchain 状态的 OutMsgQueue 是一个非分割的关键部分。 它持有来自 OutMsgDescr 的未发送消息，直到它们被处理或发送到目的地。

#### 碎片拆分和合并机械器

在动态碎片背景下，碎片配置可能会因拆分和合并事件而改变。 这些事件与主链块同步。 例如，如果发生分割或合并，受影响的碎片会等待下一个主链区块继续进行。

## 另见：

- [块布局](/develop/data-格式s/block-layout)
- [Whitepapers](/learn/docs)
