# Nominator Pool 사용법

:::tip
이 튜토리얼을 읽기 전에 [Nominator Pool 명세서](/v3/documentation/smart-contracts/contracts-specs/nominator-pool)를 숙지하는 것이 좋습니다.
:::

## Nominator Pool 모드에서 Validator 실행하기

1. validator용 하드웨어 설정 - 8 vCPU, 128GB 메모리, 1TB SSD, 고정 IP 주소, 1Gb/s 인터넷 속도가 필요합니다.

   네트워크 안정성을 위해 validator 노드를 단일 데이터 센터에 집중하는 대신 전 세계 다양한 지리적 위치에 분산하는 것이 좋습니다. [이 사이트](https://status.toncenter.com/)에서 다양한 위치의 부하를 평가할 수 있습니다. 지도는 유럽, 특히 핀란드, 독일, 파리의 높은 데이터 센터 사용률을 보여줍니다. 따라서 Hetzner와 OVH 같은 제공업체는 권장되지 않습니다.

   > 하드웨어가 위 사양과 일치하거나 초과하는지 확인하세요. 부족한 하드웨어로 validator를 실행하면 네트워크에 부정적인 영향을 미치고 페널티를 받을 수 있습니다.
   >
   > 2021년 5월 기준으로 Hetzner는 서버에서 채굴을 금지했으며, 이 금지에는 PoW와 PoS 알고리즘이 모두 포함됩니다. 일반 노드 설치도 서비스 약관 위반으로 간주될 수 있습니다.
   >
   > **권장 제공업체:** [Amazon](https://aws.amazon.com/), [DigitalOcean](https://www.digitalocean.com/), [Linode](https://www.linode.com/), [Alibaba Cloud](https://alibabacloud.com/), [Latitude](https://www.latitude.sh/).

2. [여기](/v3/guidelines/nodes/running-nodes/full-node#install-the-mytonctrl)에 설명된 대로 **mytonctrl**을 설치하고 동기화합니다.

   추가 도움이 필요한 경우 이 [비디오 가이드](/v3/guidelines/nodes/running-nodes/full-node#run-a-node-video)를 참조하세요.

3. `wl` 목록에 표시된 validator 지갑 주소로 1 TON을 전송합니다.

4. `aw` 명령을 사용하여 validator 지갑을 활성화합니다.

5. 풀 모드 활성화:

   ```bash
   enable_mode nominator-pool
   set stake null
   ```

6. 두 개의 풀 생성(짝수 및 홀수 검증 라운드용):

   ```bash
   new_pool p1 0 1 1000 300000
   new_pool p2 0 1 1001 300000
   ```

   여기서:

   - `p1`은 풀 이름입니다;
   - `0` %는 validator의 보상 지분입니다(예: 40%의 경우 40 사용);
   - `1`은 풀의 최대 nominator 수입니다(\<= 40이어야 함);
   - `1000` TON은 최소 validator 스테이크입니다(>= 1K TON이어야 함);
   - `300000` TON은 최소 nominator 스테이크입니다(>= 10K TON이어야 함);

   > (!) 풀 구성이 동일할 필요는 없으며, 서로 다르게 만들기 위해 한 풀의 최소 스테이크에 1을 추가할 수 있습니다.
   >
   > (!) https://tonmon.xyz/를 사용하여 현재 최소 validator 스테이크를 확인하세요.

7. `pools_list`를 입력하여 풀 주소 표시:

   ```bash
   pools_list
   Name  Status  Balance  Address
   p1    empty   0        0f98YhXA9wnr0d5XRXT-I2yH54nyQzn0tuAYC4FunT780qIT
   p2    empty   0        0f9qtmnzs2-PumMisKDmv6KNjNfOMDQG70mQdp-BcAhnV5jL
   ```

8. 각 풀에 1 TON을 보내고 풀 활성화:

   ```bash
   mg validator_wallet_001 0f98YhXA9wnr0d5XRXT-I2yH54nyQzn0tuAYC4FunT780qIT 1
   mg validator_wallet_001 0f9qtmnzs2-PumMisKDmv6KNjNfOMDQG70mQdp-BcAhnV5jL 1
   activate_pool p1
   activate_pool p2
   ```

9. `pools_list`를 입력하여 풀 표시:

   ```bash
   pools_list
   Name  Status  Balance      Address
   p1    active  0.731199733  kf98YhXA9wnr0d5XRXT-I2yH54nyQzn0tuAYC4FunT780v_W
   p2    active  0.731199806  kf9qtmnzs2-PumMisKDmv6KNjNfOMDQG70mQdp-BcAhnV8UO
   ```

10. 링크 "https://tonscan.org/nominator/{address_of_pool}"를 통해 각 풀을 열고 풀 구성을 확인합니다.

11. 각 풀에 validator 예치 진행:

    ```bash
    deposit_to_pool validator_wallet_001 <address_of_pool_1> 1005
    deposit_to_pool validator_wallet_001 <address_of_pool_2> 1005
    ```

   이 명령에서 `1005` TON은 예치 금액입니다. 예치 처리를 위해 풀에서 1 TON이 차감될 것입니다.

12. 각 풀에 nominator 예치 진행:

    풀 링크(**9단계**에서)를 방문하고 **ADD STAKE**를 클릭합니다.
    **mytonctrl**을 사용하여 다음 명령으로도 예치할 수 있습니다:

    ```bash
    mg nominator_wallet_001 <address_of_pool_1> 300001 -C d
    mg nominator_wallet_001 <address_of_pool_2> 300001 -C d
    ```

> (!) nominator 지갑은 basechain(workchain 0)에서 초기화되어야 합니다.
>
> (!) validator 지갑과 nominator 지갑은 반드시 별도로 보관해야 합니다! validator 지갑은 모든 시스템 트랜잭션 처리를 보장하기 위해 validator 노드가 있는 서버에 보관해야 합니다. 반면 nominator 지갑은 콜드 암호화폐 지갑에 보관해야 합니다.
>
> nominator 예치금을 출금하려면 코멘트 `w`가 있는 트랜잭션을 풀 주소로 보냅니다(트랜잭션 처리를 위해 1 TON 첨부). **mytonctrl**을 사용하여 이 작업을 수행할 수도 있습니다.

13. nominator를 초대하여 풀에 예치하도록 합니다. 검증 참여는 자동으로 시작됩니다.

    > (!) validator 지갑에 운영 비용으로 최소 월 200 TON이 있는지 확인하세요.

## 풀 구성

자신에게 대여할 경우 `new_pool p1 0 1 1000 300000`을 사용합니다(최대 1 nominator, 0% validator 지분).

많은 nominator를 위한 풀을 만드는 경우 다음과 같이 사용할 수 있습니다: `new_pool p1 40 40 10000 10000`(최대 40 nominator, 40% validator 지분, 최소 참가자 스테이크 10K TON).

## 일반 Validator를 Nominator Pool 모드로 전환하기

1. `set stake 0`을 입력하여 선거 참여를 중단합니다.

2. elector로부터 두 스테이크 모두가 반환될 때까지 기다립니다.

3. "Nominator Pool 모드에서 Validator 실행하기"의 **4단계**부터 진행합니다.
