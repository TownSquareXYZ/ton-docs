# تفاوت بلاکچین‌ها

در این فصل، تفاوت‌های کلیدی بین بلاکچین اتریوم و بلاکچین TON را بررسی خواهیم کرد. این تحلیل شامل بررسی معماری شبکه، برجسته کردن ویژگی‌های منحصر به فرد آنها و ارزیابی مزایا و معایب هر کدام خواهد بود.

با شروع بررسی یک نمای کلی از اکوسیستم‌های اتریوم و TON، می‌توان اشاره کرد که هر دو پلتفرم ساختاری مشابه از شرکت‌کنندگان و خدمات ارائه می‌دهند، از جمله کاربرانی که دارایی دارند و تراکنش انجام می‌دهند، اعتبارسنج‌هایی که شبکه را نگه می‌دارند و ایمن می‌کنند، و توسعه‌دهندگان برنامه که از بلاکچین به عنوان مبنای محصولات و خدمات خود استفاده می‌کنند. هر دو اکوسیستم شامل خدمات حضانتی و غیر حضانتی هستند که به کاربران سطوح مختلفی از کنترل بر دارایی‌های خود ارائه می‌دهند.

علاوه بر این، باید تاکید کرد که هر دو پلتفرم تسهیل‌کننده ایجاد برنامه‌های غیرمتمرکز (DApps) هستند و ابزارها و استانداردهای قدرتمندی برای توسعه به توسعه‌دهندگان ارائه می‌دهند.

با این حال، با وجود شباهت در ساختار کلی و ویژگی‌های ارائه شده، جنبه‌های فناوری کلیدی و رویکردهای طراحی شبکه اتریوم و TON به طور قابل توجهی متفاوت هستند. این تفاوت‌ها مبنای درک جامع از مزایای منحصر به فرد و محدودیت‌های هر پلتفرم را فراهم می‌کنند، که به ویژه برای توسعه‌دهندگانی که به دنبال استفاده حداکثری از قابلیت‌های هر شبکه هستند، مهم است. در زیر بخش‌هایی از این تفاوت‌ها را با تمرکز بر معماری شبکه، مدل‌ها، مکانیزم‌های تراکنش و سیستم تسویه تراکنش‌ها بررسی خواهیم کرد تا به توسعه‌دهندگان دیدگاهی جامع ارائه دهیم.

## معماری بلاکچین‌ها

اتریوم با به ارث بردن و گسترش اصول بنیادی بیت‌کوین، به توسعه‌دهندگان انعطاف‌پذیری لازم برای ایجاد برنامه‌های پیچیده غیرمتمرکز (DApps) را فراهم کرده است. ویژگی منحصر به فرد اتریوم توانایی ارائه هر حساب با یک فضای داده فردی است که به تراکنش‌ها امکان می‌دهد نه تنها انتقال توکن را انجام دهند، بلکه وضعیت بلاکچین را با تعامل با قراردادهای هوشمند تغییر دهند. این توانایی تعامل همزمان بین حساب‌ها، همانطور که می‌دانیم، وعده‌های بزرگی برای توسعه برنامه‌ها دارد، اما همچنین مسئله مقیاس‌پذیری را نیز مطرح می‌کند. هر تراکنش در شبکه اتریوم نیازمند بروزرسانی و نگهداری وضعیت کامل بلاکچین توسط گره‌ها است که منجر به تاخیر قابل توجه و افزایش هزینه گس با افزایش استفاده از شبکه می‌شود.

در پاسخ به این چالش‌ها، TON یک رویکرد جایگزین ارائه می‌دهد که بهبود مقیاس‌پذیری و عملکرد را هدف قرار داده است. طراحی شده با هدف ارائه حداکثر انعطاف‌پذیری به توسعه‌دهندگان برای ایجاد برنامه‌های مختلف، TON از مفهوم شاردها و مسترچین برای بهینه‌سازی فرآیند ایجاد بلوک استفاده می‌کند. در هر شاردچین و مسترچین TON، به طور متوسط هر ۵ ثانیه یک بلوک جدید تولید می‌شود و اجرای سریع تراکنش‌ها را تضمین می‌کند. برخلاف اتریوم، که بروزرسانی‌های وضعیت همزمان را اجرا می‌کند، TON پیام‌رسانی ناهمزمان بین قراردادهای هوشمند را پیاده‌سازی می‌کند و اجازه می‌دهد هر تراکنش به طور مستقل و به صورت موازی پردازش شود و به طور قابل توجهی سرعت پردازش تراکنش‌ها در شبکه را افزایش دهد. بخش‌ها و مقالاتی که باید با آنها آشنا شوید:

- [شاردها](/v3/documentation/smart-contracts/shards/shards-intro)
- [مستند مقایسه بلاکچین‌ها](https://ton.org/comparison_of_blockchains.pdf)
- [جدول مقایسه بلاکچین‌ها (کمتر آموزنده از مستند، اما بیشتر بصری)](/v3/concepts/dive-into-ton/ton-blockchain/blockchain-comparison)

در نتیجه، با مقایسه معماری و زیرساخت‌های فناوری TON و اتریوم، روشن است که TON مزایای قابل توجهی ارائه می‌دهد. با رویکرد نوآورانه خود به پردازش تراکنش‌های غیرهمزمان و معماری منحصر به فرد شارد و مسترچین، TON پتانسیل پشتیبانی از میلیون‌ها تراکنش در ثانیه را بدون به خطر انداختن امنیت یا تمرکززدایی نشان می‌دهد. این ویژگی‌ها به پلتفرم انعطاف‌پذیری و کارایی بی‌نظیری می‌بخشد و آن را برای طیف گسترده‌ای از برنامه‌ها ایده‌آل می‌کند.

## مدل مبتنی بر حساب (اتریوم) در مقابل مدل بازیگر (TON)

در زیر بخش اول، مقایسه‌ای بین اتریوم و TON انجام دادیم و تفاوت‌های کلیدی معماری آنها و چالش‌های اصلی که اتریوم با آن مواجه است را برجسته کردیم. به خصوص توجه به رویکردهای مختلف برای سازماندهی تعاملات در این بلاکچین‌ها و استفاده از مدل‌ها شایان ذکر است. این تفاوت‌ها از انتخاب‌های معماری منحصر به فرد هر پلتفرم نشأت می‌گیرند. برای توسعه‌دهندگانی که به اتریوم عادت دارند، مهم است که این تفاوت‌ها را به‌طور عمیق درک کنند تا به‌طور مؤثر به توسعه بر روی TON منتقل شوند. این درک از معماری اجازه می‌دهد تا تعامل قراردادهای هوشمند را در محیط جدید سازگار و بهینه کند.

بنابراین، بیایید به یاد بیاوریم که مدل مبتنی بر حساب در اتریوم چگونه کار می‌کند. اتریوم از این مدل برای پیگیری موجودی‌ها استفاده می‌کند. مانند یک حساب بانکی، وجوه در حساب‌ها ذخیره می‌شود نه در سکه‌های فردی. دو نوع حساب وجود دارد:

- حساب‌های مدیریت‌شده توسط کاربر (EOAs) - حساب‌هایی که به‌طور خارجی مدیریت می‌شوند و توسط کاربر با استفاده از کلیدهای عمومی و خصوصی کنترل می‌شوند. کلید عمومی به دیگران اجازه می‌دهد تا پرداخت‌ها را به حساب ارسال کنند.
- حساب‌های قرارداد - توسط کد قرارداد هوشمند کنترل می‌شوند نه کلیدهای خصوصی. به دلیل نداشتن کلید خصوصی، حساب‌های قرارداد نمی‌توانند به‌تنهایی تراکنش‌ها را آغاز کنند.

وقتی یک کاربر اتریوم کیف پول ایجاد می‌کند، یک حساب خارجی به وضعیت جهانی در همه گره‌های شبکه غیرمتمرکز اضافه می‌شود وقتی اولین تراکنش فراخوانی می‌شود یا اولین وجوه دریافت می‌شود. استقرار یک قرارداد هوشمند یک حساب قرارداد ایجاد می‌کند که قادر است به‌طور برنامه‌ریزی‌شده وجوه را بر اساس شرایط خاصی ذخیره و توزیع کند. همه انواع حساب‌ها موجودی دارند، ذخیره‌سازی دارند و می‌توانند با فراخوانی عملکردهای دیگر حساب‌ها تراکنش‌ها را انجام دهند. این ساختار توانایی اتریوم برای خدمت به عنوان پول برنامه‌ریزی‌شده را فراهم می‌کند.

اتریوم دارای پردازش تراکنش همزمان است که در آن هر تراکنش به ترتیب دقیق، به‌طور متوالی پردازش می‌شود. این اطمینان حاصل می‌کند که وضعیت بلاکچین همیشه برای همه شرکت‌کنندگان در شبکه سازگار و قابل پیش‌بینی باقی می‌ماند. همه تراکنش‌ها اتمی هستند، به‌طور کامل یا با موفقیت کامل به پایان می‌رسند یا به‌طور کامل با شکست کامل به پایان می‌رسند، بدون هیچ‌گونه اجرای جزئی یا ناقص. علاوه بر این، وقتی یک قرارداد هوشمند فراخوانی می‌شود و به نوبه خود یک قرارداد هوشمند دیگر را فراخوانی می‌کند، فراخوانی در همان تراکنش به‌طور فوری اتفاق می‌افتد. اما در اینجا دوباره معایبی وجود دارد، یک تراکنش می‌تواند به اندازه‌ای که مجاز است رشد کند. یک اثر منفی از همزمانی همچنان بارگذاری بیش از حد است، زیرا محاسبات نمی‌توانند به صورت موازی اجرا شوند. تعداد قراردادها و کاربران افزایش می‌یابد و عدم توانایی در موازی‌سازی محاسبات به یک عامل محدودکننده اصلی در رشد شبکه تبدیل می‌شود.

حالا بیایید بفهمیم مدل بازیگر چیست؟ مدل بازیگر یک رویکرد برای محاسبات موازی و توزیع شده است که در آن عنصر اصلی یک بازیگر است - یک بلوک اجرایی مستقل از کد. در اصل برای محاسبات خوشه‌ای توسعه یافته است، این مدل به‌طور گسترده‌ای در معماری‌های میکروسرویس‌ها استفاده می‌شود تا نیازهای سیستم‌های توزیع شده مدرن را با توانایی مقیاس‌پذیری، موازی‌سازی و تحمل خطا برآورده کند. بازیگران پیام‌ها را دریافت و پردازش می‌کنند و بسته به منطق پیام، با پذیرش تغییرات محلی یا انجام اقدامات در پاسخ، می‌توانند سایر بازیگران را ایجاد کنند یا پیام‌ها را به جلو بفرستند. آن‌ها ایمن در برابر موضوع هستند و قابل بازیابی هستند و نیاز به قفل‌ها را از بین می‌برند و پردازش موازی وظایف را ساده می‌کنند. این مدل برای ساختن راه‌حل‌های سروری مقیاس‌پذیر و قابل اعتماد ایده‌آل است، دسترسی همزمان کارآمد و کنترل پشتیبانی از پیام‌رسانی همزمان و غیر همزمان را فراهم می‌کند.

در TON، همه چیز توسط قراردادهای هوشمند نمایان می‌شود که می‌توانند در زمینه مدل بازیگر نیز به عنوان بازیگر شناخته شوند. یک قرارداد هوشمند یک شیء با ویژگی‌هایی مانند آدرس، کد، داده و موجودی است. آن توانایی ذخیره داده‌ها را دارد و بر اساس دستورالعمل‌های دریافتی از قراردادهای هوشمند دیگر عمل می‌کند. پس از دریافت یک پیام و پردازش آن توسط اجرای کد خود در TVM، سناریوهای مختلفی می‌تواند رخ دهد:

- قرارداد ویژگی‌های خود را تغییر می‌دهد `code, data, balance`
- قرارداد به‌طور اختیاری یک پیام خروجی تولید می‌کند
- قرارداد تا وقوع رویداد بعدی به حالت آماده‌باش می‌رود

نتیجه اسکریپت‌ها همیشه ایجاد یک تراکنش است. خود تراکنش‌ها ناهمزمان هستند، به این معنی که سیستم می‌تواند به پردازش تراکنش‌های دیگر ادامه دهد در حالی که منتظر تکمیل تراکنش‌های گذشته است. این امر هنگام پردازش تراکنش‌های پیچیده‌تر انعطاف‌پذیری بیشتری فراهم می‌کند. گاهی اوقات یک تراکنش منفرد ممکن است نیاز به فراخوانی چند قرارداد هوشمند داشته باشد که باید در یک توالی خاص اجرا شوند. به دلیل ناهمزمان بودن این فراخوانی‌ها، توسعه‌دهندگان می‌توانند به‌طور آسان‌تری جریان‌های تراکنش پیچیده را طراحی و پیاده‌سازی کنند که ممکن است شامل چندین عملیات همزمان باشد. یک توسعه‌دهنده‌ای که از اتریوم می‌آید باید بداند که قراردادهای هوشمند در بلاکچین TON تنها می‌توانند با ارسال پیام‌های ناهمزمان به یکدیگر ارتباط برقرار کنند، به این معنی که اگر نیاز به درخواست داده از یک قرارداد دیگر و پاسخ فوری وجود داشته باشد، این امکان‌پذیر نخواهد بود. در عوض، `get methods` باید توسط مشتریان خارج از شبکه فراخوانی شوند، مشابه به این که یک کیف پول در اتریوم از گره‌های RPC مانند Infura برای درخواست وضعیت قراردادهای هوشمند استفاده می‌کند. این محدودیت برای چندین دلیل مهم است. به عنوان مثال، وام‌های فوری تراکنش‌هایی هستند که باید در یک بلوک اجرا شوند و متکی به توانایی قرض گرفتن و بازپرداخت در همان تراکنش هستند. این امر توسط طبیعت همزمان EVM اتریوم تسهیل می‌شود، اما در TON، طبیعت ناهمزمان همه تراکنش‌ها اجرای یک وام فوری را غیرممکن می‌سازد. همچنین اوراکل‌ها که داده‌های خارجی را به قراردادهای هوشمند ارائه می‌دهند، در TON نیاز به یک فرآیند طراحی پیچیده‌تری دارند. اوراکل‌ها چه هستند و چگونه می‌توان از آن‌ها در TON استفاده کرد [اینجا](/v3/documentation/dapps/oracles/about_blockchain_oracles) در دسترس است.

## تفاوت کیف پول‌ها

ما قبلاً بحث کردیم که در اتریوم، کیف پول کاربر بر اساس آدرس او ایجاد می‌شود که در رابطه یک به یک با کلید عمومی او قرار دارد. اما در TON، همه کیف پول‌ها قراردادهای هوشمندی هستند که باید توسط خود کاربر مستقر شوند. از آنجایی که قراردادهای هوشمند می‌توانند به روش‌های مختلف پیکربندی شوند و ویژگی‌های مختلفی داشته باشند، نسخه‌های مختلفی از کیف پول‌ها وجود دارد که می‌توانید درباره آنها [اینجا](https://ton.org/v3/documentation/smart-contracts/contracts-specs/wallet-contracts) بیشتر بخوانید. به دلیل اینکه کیف پول‌ها قراردادهای هوشمند هستند، یک کاربر می‌تواند چندین کیف پول با آدرس‌ها و پارامترهای اولیه مختلف داشته باشد. برای ارسال یک تراکنش، کاربر باید پیام را با کلید خصوصی خود امضا کند و آن را به قرارداد کیف پول خود ارسال کند که به نوبه خود آن را به قرارداد هوشمند یک برنامه خاص (DApp) ارسال می‌کند. این روش به شدت انعطاف‌پذیری در طراحی کیف پول را افزایش می‌دهد و توسعه‌دهندگان می‌توانند نسخه‌های جدیدی از کیف پول را در آینده اضافه کنند. در حال حاضر توسعه‌دهندگان در اتریوم به طور فعال از کیف پول‌های چند امضایی (قراردادهای هوشمند) مانند Gnosis استفاده می‌کنند و به تازگی شروع به معرفی اصطلاحات حساب‌های انتزاعی مانند ERC-4337 کرده‌اند، جایی که کیف پول‌ها با ویژگی‌هایی مانند ارسال تراکنش بدون نیاز به توکن بومی، بازیابی حساب بعد از دست دادن آن و غیره پر می‌شوند. اما لازم به ذکر است که استفاده از حساب‌های کیف پول در اتریوم بسیار گرانتر از نظر هزینه گس در مقایسه با EOA است.

## پیام‌ها و تراکنش‌ها

آنچه بین دو قرارداد اتفاق می‌افتد یک پیام نامیده می‌شود - تعداد کمی از توکن‌ها و داده‌های دلخواه به یک آدرس مشخص ارسال می‌شود. وقتی پیام به قرارداد می‌رسد، توسط کد قرارداد پردازش می‌شود، قرارداد وضعیت خود را به‌روزرسانی می‌کند و به‌طور اختیاری یک پیام جدید ارسال می‌کند. همه این اقدامات در قرارداد به عنوان تراکنش‌ها ثبت می‌شود. بیایید یک مثال را تصور کنیم، ما یک زنجیره پیام داریم، از قرارداد `A` به قرارداد `B`، از قرارداد `B` به قرارداد `C`، پس دو پیام و سه تراکنش خواهیم داشت. اما ابتدا، برای تغییر وضعیت بلاکچین، به یک سیگنال خارجی نیاز است. برای فراخوانی یک قرارداد هوشمند، باید یک پیام خارجی ارسال کنید که به تاییدکنندگان می‌رود و آنها آن را به قرارداد هوشمند اعمال می‌کنند. و در زیر بخش قبلی بحث کردیم که کیف پول یک قرارداد هوشمند است، بنابراین این پیام خارجی معمولاً ابتدا به قرارداد هوشمند کیف پول می‌رود که آنها را به عنوان اولین تراکنش ثبت می‌کند و آن اولین تراکنش معمولاً حاوی یک پیام داخلی برای قرارداد مقصد واقعی است. وقتی قرارداد هوشمند کیف پول پیام را دریافت می‌کند، آن را پردازش می‌کند و به قرارداد مقصد تحویل می‌دهد (در مثال ما، قرارداد `A` می‌تواند یک کیف پول باشد و وقتی پیام خارجی را دریافت می‌کند، اولین تراکنش را خواهد داشت). توالی تراکنش‌ها یک زنجیره را تشکیل می‌دهد. می‌توانید ببینید که هر قرارداد هوشمند تراکنش‌های خود را دارد و به این معنی است که هر قرارداد بلاکچین کوچک خود را دارد (می‌توانید بیشتر درباره آن [اینجا](https://ton.org/v3/concepts/dive-into-ton/ton-blockchain/blockchain-of-blockchains) بخوانید)، بنابراین شبکه می‌تواند تراکنش‌ها را به‌طور کاملاً مستقل از یکدیگر پردازش کند.

## تفاوت سیستم گس

در اتریوم، هزینه یک تراکنش با `gas` اندازه‌گیری می‌شود که نشان‌دهنده مقدار منابع محاسباتی مورد نیاز برای تراکنش است. هزینه `gas` به دو بخش تقسیم می‌شود: `base fee` که توسط پروتکل تعیین می‌شود و `priority fee` که کاربر برای سرعت بخشیدن به پردازش تراکنش توسط تاییدکنندگان اضافه می‌کند. هزینه کلی اینگونه محاسبه می شود: `total fee` = `units of gas used` \* (`priority fee` + `base fee`).
علاوه بر این، ذخیره‌سازی در اتریوم اساساً رایگان است، به این معنی که پس از ذخیره شدن داده‌ها بر روی بلاکچین، هیچ هزینه‌ای برای نگهداری آن وجود ندارد.

در TON، محاسبه هزینه‌های تراکنش پیچیده است و شامل چندین نوع هزینه است: برای ذخیره‌سازی قراردادهای هوشمند در بلاکچین، برای وارد کردن پیام‌ها به بلاکچین، برای اجرای کد در ماشین مجازی، برای پردازش اقدامات پس از اجرای کد، و برای ارسال پیام‌ها خارج از بلاکچین TON. قیمت گس و برخی پارامترهای دیگر می‌توانند با رای‌گیری در شبکه اصلی تغییر کنند. برخلاف اتریوم، کاربران TON نمی‌توانند قیمت گس را خودشان تعیین کنند. همچنین، توسعه‌دهنده باید مانده گس را به مالک بازگرداند، در غیر این صورت آنها قفل می‌شوند. استفاده از ذخیره‌سازی قراردادهای هوشمند نیز بر قیمت تأثیر می‌گذارد: اگر قرارداد هوشمند یک کیف پول برای مدت طولانی استفاده نشده باشد، تراکنش بعدی هزینه بیشتری خواهد داشت.
