import ThemedImage from '@theme/ThemedImage';
import ConceptImage from '@site/src/components/conceptImage'
import Player from '@site/src/components/player'

# شروع به کار با TON

اولین برنامهٔ خود را از ابتدا در بلاکچین TON راه‌اندازی کنید و سرعت، قابلیت اطمینان و مفاهیم اساسی تفکر غیر همزمان را کشف کنید.

:::tip راهنمای دوستانه برای تازه‌واردان
اگر شما کاملاً تازه‌وارد در برنامه‌نویسی هستید، این راهنما بهترین انتخاب برای شماست.
:::

این مسیر یادگیری شامل **5 ماژول** است و باید حدود **45 دقیقه** طول بکشد.

## 🛳 چه چیزی یاد خواهید گرفت

در این آموزش، شما یاد خواهید گرفت که چگونه به راحتی با استفاده از JavaScript تراکنش‌های بلاکچینی انجام دهید. این روش راحت و کاربرپسند است، در حالی که می‌توانستید بدون این آموزش هم یاد بگیرید.

1. با استفاده از Tonkeeper کیف پول TON خود را میسازید
2. شما از منبع Testnet برای شارژ کیف پول خود برای تست استفاده خواهید کرد.
3. شما مفاهیم اساسی از قراردادهای هوشمند TON (آدرس‌ها، سلول‌ها) را خواهید فهمید
4. شما یاد خواهید گرفت که چگونه با استفاده از TypeScript SDK و ارائه دهنده API با TON تعامل داشته باشید
5. شما اولین تراکنش خود را با استفاده از برنامه کنسول NFT Miner کامپایل خواهید کرد

 _شما قرار است یک NFT rocket achievement را استخراج کنید!!!_

به عنوان اولین ماینرها در TON، شما به قرارداد هوشمند Proof-of-Work میروید و در نهایت پاداشی محرمانه برای کیف پول TON خود برداشت می‌کنید. بررسی کنید:

<div style={{width: '100%', maxWidth:'250pt',  textAlign: 'center', margin: '0 auto' }}>
  <video width={'300'} style={{width: '100%', maxWidth:'250pt',  borderRadius: '10pt', margin: '15pt auto' }} muted={true} autoPlay={true} loop={true}>
    <source src="/files/onboarding-nft.mp4" type="video/mp4" />
مرورگر شما از تگ ویدیو پشتیبانی نمی‌کند.
  </video>
</div>

هدف ما برای امروز این است که یک NFT استخراج کنیم! این دستاورد با شما _برای همیشه_ خواهد ماند.

در نهایت، شما می‌توانید این NFT rocket achievement را در mainnet نیز استخراج کنید. (_تنها 0.05 TON هزینه دارد!_).

### استخراج در بلاکچین TON

امروز قصد داریم به سازندگان آینده خود بیاموزیم که چگونه در بلاکچین TON استخراج انجام دهند. این تجربه به همه شما اجازه می‌دهد تا اهمیت استخراج و اینکه چرا استخراج بیت‌کوین به انقلاب در صنعت کمک کرد را درک کنید.

اگرچه چارچوب قرارداد هوشمند PoW Giver که فرآیند استخراج اولیه که اساس TON را تشکیل داد، در زمان ارائه تکمیل شد، آخرین TON در ژوئن ۲۰۲۲ استخراج شد تا مکانیزم توزیع توکن‌های TON از طریق اثبات کار (PoW) به پایان برسد. با این حال، با گذار اخیر ما به اثبات سهام (PoS)، عصر staking بر روی TON آغاز شده است.

- [مدل اقتصادی ما و استخراج در TON را عمیق‌تر بررسی کنید](https://ton.org/mining)

اکنون بگذارید بر روی اولین مراحل برای تبدیل شدن به یک **توسعه‌دهنده TON** تمرکز کنیم و یاد بگیریم چگونه یک NFT را بر روی TON ماین کنیم! در زیر یک مثال از چیزی که قصد داریم ایجاد کنیم ارائه شده است.

<div style={{ width: '100%', textAlign: 'center', margin: '0 auto' }}>
  <video style={{ width: '100%', borderRadius: '10pt', margin: '15pt auto', maxWidth: '90%' }} muted={true} autoPlay={true}
         loop={true}>
    <source src="/files/onboarding.mp4" type="video/mp4" />

مرورگر شما از ویدئو پشتیبانی نمی‌کند.

</video>
</div>

اگر به تمرکز روی این موضوع ادامه دهیم، می‌توانیم در حدود نیم ساعت یک ماینر ایجاد کنیم.

## 🦄 شروع

برای شروع، تمام توسعه‌دهندگان از اجزای زیر استفاده خواهند کرد:

- **کیف پول**: به کیف پول غیرحضانتی نیاز دارید تا یک NFT را در حالت Testnet ذخیره کنید.
- **مخزن**: ما از قالب آماده که مخصوص شما طراحی شده استفاده خواهیم کرد.
- **محیط توسعه**: توسعه‌دهندگان باید تعیین کنند که آیا می‌خواهند با استفاده از محیط محلی یا ابری استخراج کنند.

### دانلود و ایجاد یک کیف پول

برای شروع، به یک کیف پول غیرحضانتی نیاز دارید که به شما اجازه دهد TON خود را دریافت و نگهداری کنید. در این راهنما، از Tonkeeper استفاده می‌کنیم. شما باید حالت Testnet را در کیف پول فعال کنید تا بتوانید Toncoin های Testnet را دریافت کنید. این توکن‌ها بعدها برای ارسال تراکنش نهایی ضرب به قرارداد هوشمند استفاده خواهند شد.

:::info
با یک کیف پول غیرحضانتی، کیف پول و کلید خصوصی آن در اختیار کاربر قرار دارد.
:::

برای دانلود و ایجاد کیف پول TON مراحل ساده زیر را دنبال کنید:

1. برنامه Tonkeeper را بر روی گوشی هوشمند خود نصب کنید. می‌توانید [اینجا](https://Tonkeeper.com/) آن را دانلود کنید.
2. سپس، شما به [فعال‌سازی حالت تست](/v3/concepts/dive-into-ton/ton-ecosystem/wallet-apps#tonkeeper-test-environment) در داخل Tonkeeper نیاز خواهید داشت.

آسان بود! حالا به سمت توسعه برویم.

### راه‌اندازی پروژه

برای ساده‌سازی کار شما و پرهیز از وظایف تکراری سطح پایین، از یک الگو استفاده می‌کنیم.

:::tip
توجه داشته باشید که برای ادامه کار، نیاز است که به [GitHub وارد شوید](https://github.com/login).
:::

لطفاً از [الگوی ton-onboarding-challenge](https://github.com/ton-community/ton-onboarding-challenge) برای ایجاد پروژه خود استفاده کنید، با کلیک بر روی دکمه “Use this template” و انتخاب برگه “Create a new repository” همانطور که در زیر نشان داده شده است:

<br></br>
<ThemedImage
    alt=""
    sources={{
        light: '/img/tutorials/onboarding/1.png?raw=true',
        dark: '/img/tutorials/onboarding/1-dark.png?raw=true',
    }}
/>
<br></br>

پس از تکمیل این مرحله، به یک مخزن با عملکرد بالا دسترسی خواهید داشت که می‌تواند به عنوان هسته ماینر شما عمل کند. تبریک می‌گویم! ✨

### محیط‌های توسعه

مرحله بعدی این است که بهترین محیط توسعه‌دهنده که با نیازها، سطح تجربه و مجموعه مهارت‌های کلی شما سازگار است را انتخاب کنید. همانطور که می‌بینید، می‌توانید این فرآیند را با استفاده از یک محیط ابری یا محلی انجام دهید. توسعه در ابر اغلب به عنوان شیوه ساده‌تر و آسان‌تر برای شروع تلقی می‌شود. در زیر، مراحل لازم برای هر دو رویکرد را توضیح خواهیم داد.

:::tip
مطمئن شوید که مخزن را در پروفایل GitHub خود که از الگو در مرحله قبلی ایجاد شده است، باز کرده‌اید.
:::

<br></br>
<ThemedImage
    alt=""
    sources={{
        light: '/img/tutorials/onboarding/3.png?raw=true',
        dark: '/img/tutorials/onboarding/3-dark.png?raw=true',
    }}
/>
<br></br>

#### محیط‌های توسعه محلی و ابری

- برای کاربرانی که با JavaScript آشنا نیستند، استفاده از یک محیط توسعه JavaScript می‌تواند چالشی باشد، به ویژه اگر رایانه و سیستم‌های ابزاری شما برای این هدف تنظیم نشده‌اند.

- اما اگر با NodeJS و Git آشنا هستید و می‌دانید که چگونه با `npm` کار کنید، ممکن است استفاده از یک **محیط محلی** برایتان راحت‌تر باشد.

#### فضاهای کد ابری

اگر محیط توسعه ابری را انتخاب می‌کنید، با انتخاب زبانه _Code_ و سپس کلیک بر دکمه _Create codespace on master_ در مخزن GitHub می‌توانید به‌راحتی شروع کنید، همانطور که در تصویر زیر نشان داده شده است:

<br></br>
<ThemedImage
    alt=""
    sources={{
        light: '/img/tutorials/onboarding/2.png?raw=true',
        dark: '/img/tutorials/onboarding/2-dark.png?raw=true',
    }}
/>
<br></br>

بعد از اتمام این مرحله، GitHub یک فضای کار ابری ویژه ایجاد می‌کند که به شما اجازه می‌دهد به IDE آنلاین VSCode (محیط یکپارچه توسعه Visual Studio Code Online) دسترسی پیدا کنید.

به محض اینکه دسترسی اعطا شد (معمولاً در حدود ۳۰ ثانیه راه‌اندازی می‌شود)، شما همه چیز مورد نیاز برای شروع را خواهید داشت بدون اینکه نیازی به نصب Git، Node.js یا سایر ابزارهای توسعه دهنده داشته باشید.

#### محیط توسعه محلی

برای ایجاد یک محیط توسعه محلی، به دسترسی به این سه ابزار اساسی نیاز دارید:

- **Git**: Git یک ابزار اساسی است که هر توسعه‌دهنده برای کار با مخازن به آن نیاز دارد. آن را می‌توانید [اینجا](https://git-scm.com/downloads) دانلود کنید.
- **NodeJS**: Node.js محیط اجراکننده JavaScript و TypeScript است که معمولاً برای توسعه برنامه‌ها بر روی TON استفاده می‌شود. آن را می‌توانید [اینجا](https://nodejs.org/en/download/) دانلود کنید.
- **JavaScript IDE**. JavaScript IDE ها معمولاً برای توسعه در محیط‌های محلی استفاده می‌شوند. یک مثال از این مورد Visual Studio Code ([VSCode](https://code.visualstudio.com/download)) است.

برای شروع، باید نمونه ابتدایی مخزن GitHub خود رو کلون کنید و مخزن درست را در محیط یکپارچه توسعه (IDE) خود باز کنید.

#### اجرای اسکریپت‌ها

در این راهنما، نیاز است که اسکریپت‌های TypeScript را اجرا کنید. تمامی دستورها، مانند اجرای اسکریپت‌ها یا نصب ماژول‌ها، از طریق خط فرمان که در محیط کار ترمینال IDE قرار دارد، اجرا می‌شوند. این محیط کار معمولاً در پایین IDE قرار دارد.

برای مثال، در فضاهای کد ابری، باید محیط کار ترمینال را باز کنید (اگر از قبل باز نیست):

<br></br>
<ThemedImage
    alt=""
    sources={{
        light: '/img/tutorials/onboarding/6.png?raw=true',
        dark: '/img/tutorials/onboarding/6-dark.png?raw=true',
    }}
/>
<br></br><br></br>

فرمان‌ها را در این پنجره وارد کنید و با _Enter_ اجرا کنید:

<br></br>
<ThemedImage
    alt=""
    sources={{
        light: '/img/tutorials/onboarding/4.png?raw=true',
        dark: '/img/tutorials/onboarding/4-dark.png?raw=true',
    }}
/>
<br></br><br></br>

ترمینال همچنین به عنوان یک برنامه جداگانه در دسترس است. لطفاً نسخه مناسب را بر اساس IDE و سیستم عامل خود انتخاب کنید.

عالی! پس از این مراحل، آماده‌اید تا عمیق‌تر به اسرار بلاکچین TON بپردازید. 👀

## 🎯 اتصال به TON

خوب، برای اتصال به بلاکچین TON چه چیزی نیاز دارید؟

- **آدرس قرارداد هوشمند** به عنوان نقطه مقصد. هدف ما این است که یک NFT از _قرارداد هوشمند اثبات کار_ استخراج کنیم، بنابراین به یک آدرس نیاز داریم تا پیچیدگی فعلی ماینینگ را بدست آوریم.
- **ارائه‌دهنده API** برای ارسال درخواست‌ها به بلاکچین TON. بلاکچین TON دارای چندین [نوع API](/v3/guidelines/dapps/apis-sdks/api-types) برای اهداف مختلف است. ما از نسخه تست ‌نت [toncenter.com](https://toncenter.com/) استفاده خواهیم کرد.
- **JavaScript SDK**: یک JavaScript SDK (به یاد داشته باشید که یک SDK یک کیت توسعه نرم‌افزار است) نیاز است تا آدرس قرارداد هوشمند در حال استفاده را پردازش و آن را برای ایجاد یک درخواست API آماده کند. برای درک بهتر آدرس‌های TON و اینکه چرا باید آن‌ها را برای انجام این فرآیند پردازش کنیم، لطفاً این [منبع](/v3/documentation/smart-contracts/addresses) را ببینید تا بفهمید چرا باید آن را پردازش کنیم. برای انجام این فرآیند، ما از [`@ton/ton`](https://github.com/ton-org/ton) استفاده خواهیم کرد.

در بخش بعدی ما توضیح می‌دهیم که چگونه کاربران درخواست‌های اولیه خود را به بلاک‌چین TON با استفاده از TONCenter API و `@ton/ton` ارسال می‌کنند و داده‌ها را از قرارداد هوشمند PoW دریافت می‌کنند.

### آدرس‌های قرارداد هوشمند

برای اینکه ماینر به درستی عمل کند، نیاز است دو نوع مختلف از آدرس‌های قرارداد هوشمند اضافه کنیم. این شامل موارد زیر است:

1. **آدرس کیف‌پول**: یک آدرس کیف‌پول نیاز است، زیرا برای ماینر لازم است تا پاداش ماینینگ خود را دریافت کند (در این مورد، ما باید از [حالت Testnet در Tonkeeper](/v3/concepts/dive-into-ton/ton-ecosystem/wallet-apps#tonkeeper-test-environment) استفاده کنیم).
2. **آدرس کلکسیون**: یک آدرس کلکسیون به عنوان قرارداد هوشمند برای استخراج صحیح یک NFT نیاز است (برای انجام این فرآیند، آدرس کلکسیون NFT را از زیر نام کلکسیون TON onboarding challenge از وبسایت [Getgems](https://testnet.getgems.io/collection/EQDk8N7xM5D669LC2YACrseBJtDyFqwtSPCNhRWXU7kjEptX) کپی کنید).

بعدی، ما فایل `./scripts/mine.ts` را در معدن‌چی شما باز می‌کنیم و یک تابع `mine()` ایجاد می‌کنیم که از ثابت‌های اولیه به شرح زیر تشکیل شده است:

```ts title="./scripts/mine.ts"
import {Address} from '@ton/ton';

const walletAddress = Address.parse('YOUR_WALLET_ADDRESS');
const collectionAddress = Address.parse('COLLECTION_ADDRESS');

async function mine () {


}

mine();
```

#### استفاده از تابع async mine()

در ادامه روند ایجاد یک ماینر TON NFT، چندین درخواست به API عمومی ارسال می‌شود تا پاسخ‌ها به رشته درست کد منتقل شود و دستورالعمل‌های مورد نیاز را دریافت کند. با استفاده از تابع async/await، سادگی کد به طرز چشمگیری افزایش یافته است.

#### تجزیه آدرس

در TON، آدرس‌های قرارداد هوشمند به اشکال مختلف وجود دارند که از انواع مختلفی از نشانگر‌ها استفاده می‌کنند. در این آموزش به طور خاص، از فرم _آدرس کاربرپسند_ استفاده خواهیم کرد. با این حال، اگر به یادگیری بیشتر درباره انواع مختلف آدرس‌های قرارداد هوشمند علاقمند هستید، می‌توانید به این [منبع](/v3/documentation/smart-contracts/addresses) در مستندات ما مراجعه کنید.

برای اینکه ماینر به درستی کار کند، باید دو نوع مختلف از آدرس‌های قرارداد هوشمند را اضافه کنیم. این شامل موارد زیر است:

متد`Address.parse()` که در SDK `@ton/ton` قرار دارد به توسعه‌دهندگان اجازه می‌دهد تا یک شیء آدرس ایجاد کنند که آدرس‌ها را به روش ساده‌تری از یک فرم به فرم دیگر تبدیل کنند.

### ارتباط با یک ارائه‌دهنده API

در این مرحله، با استفاده از دستورهای خاص در اسکریپت، از طریق ارائه‌دهنده TONCenter (که در toncenter.com میزبانی می‌شود) با TON ارتباط برقرار خواهیم کرد.

ساده‌ترین روش برای انجام این کار، خرید و مقداردهی نقطه انتهایی testnet به `https://testnet.toncenter.com/api/v2/jsonRPC` است.

<br></br>

<ThemedImage
    alt=""
    sources={{
        light: '/img/tutorials/onboarding/5.png?raw=true',
        dark: '/img/tutorials/onboarding/5-dark.png?raw=true',
    }}
/>

<br></br>

ما`client` و `endpoint` را به اسکریپت `./scripts/mine.ts` با استفاده از _TonClient_ و نقطه انتهایی `https://testnet.toncenter.com/api/v2/jsonRPC` اضافه میکنیم:

```ts title="./scripts/mine.ts"
import {Address, TonClient} from "@ton/ton"

// ... previous code

// specify endpoint for Testnet
const endpoint = "https://testnet.toncenter.com/api/v2/jsonRPC"

// initialize ton library
const client = new TonClient({ endpoint });
```

:::info در تولید چه کاری انجام دهیم؟
بهتر است از یک ارائه‌دهنده گره RPC استفاده کنید، یا خودتان یک نمونه از ton-http-api اجرا کنید. برای اطلاعات بیشتر به صفحه [TonCenter API](/v3/guidelines/dapps/apis-sdks/ton-http-apis) مراجعه کنید.
:::

### دریافت داده‌های ماینینگ از بلاکچین TON

در نهایت، مرحله بعد در این فرآیند دریافت داده‌های خاص ماینینگ از بلاکچین TON است.

با توجه به [فایل README](https://github.com/ton-community/ton-onboarding-challenge#mining-process-deep-dive) و مراحل مورد نیاز برای تکمیل چالش ورود به TON، جدیدترین داده‌های استخراج TON با اجرای متد `get_mining_data` به دست می‌آید. پس از اجرا، نتیجه به شکل زیر خواهد بود:

در نتیجه باید آرایه‌ای با این فیلدها دریافت کنیم:

```bash
(
	int pow_complexity,
	int last_success,
	int seed,
	int target_delta,
	int min_cpl,
	int max_cpl
)
```

#### اجرای متدهای دریافت قرارداد هوشمند در TON

با استفاده از `@ton/ton` می‌توان تابع `client.runMethod(SMART_CONTRACT_ADDRESS, METHOD)` را اجرا کرد.
اجرای این کد به خروجی زیر در کنسول منجر می‌شود:

```ts title="./scripts/mine.ts"
// ... previous code

const miningData = await client.runMethod(collectionAddress, 'get_mining_data');

console.log(miningData.stack);
```

علاوه بر این، برای اجرای اسکریپت لازم است که دستور زیر را [در ترمینال](/v3/guidelines/get-started-with-ton#running-scripts) وارد کنید:

```bash
npm run start:script
```

:::tip
برای جلوگیری از مشکلات غیرمنتظره، اطمینان حاصل کنید که تمامی مراحل قبلی را تکمیل کرده‌اید، از جمله وارد کردن آدرس‌ قراردادها.
:::

خوب! وقتی مراحل بالا به درستی اجرا شوند، اتصال موفقیت‌آمیز به API انجام خواهد شد و داده‌های لازم در کنسول نمایش داده می‌شود. خروجی درست کنسول باید به صورت زیر شروع شود:

```bash
TupleReader {
  items: [
    {
      type: 'int',
      value: 7237005577332262213973186563042994240829374041602535252466099000494570602496n
    },
    { type: 'int', value: 1730818693n },
    { type: 'int', value: 281644526620911853868912633959724884177n },
    { type: 'int', value: 30n },
    { type: 'int', value: 171n },
    { type: 'int', value: 252n }
  ]
}

```

خروجی بالا داده‌های مربوط به اجرای فرآیند را با مجموعه‌ای از مقادیر عددی (_int_) نشان می‌دهد. تمرکز فعلی بر روی تبدیل این خروجی عددی به فرمتی است که برای استفاده عملی‌تر باشد.

ما باید خروجی هگز را به چیزی _مفید_ تبدیل کنیم.

:::info پارامترهای GAS در TON

1. اول، برای درک بهتر چگونگی کارکرد ماشین مجازی TON یا (TVM) و _چگونگی پردازش تراکنش‌های توسط TON_، بخش [مرور TVM](/v3/documentation/tvm/tvm-overview) را بررسی کنید.
2. بعد، اگر به یادگیری بیشتر در مورد چگونگی کارکردن هزینه‌های تراکنش و گس در TON علاقه‌مند هستید، به [این بخش](/v3/documentation/smart-contracts/transaction-fees/fees) از مستندات ما توجه کنید.
3. در نهایت، برای درک بهتر مقادیر دقیق گس مورد نیاز برای اجرای دستورالعمل‌های TVM، به [این بخش](/v3/documentation/tvm/instructions#gas-prices) از مستندات ما مراجعه کنید.
   :::

حالا، بیایید به آموزش برگردیم!

#### داده‌های عددی ماینینگ در یک فرم کاربرپسند

در بخش پیش‌رو درباره مقادیر عددی (_int_) مورد نیاز برای دریافت داده‌های ماینینگ صحبت می‌کنیم. قبل از پردازش، داده‌های دریافت شده باید به فرمتی که فهم آن آسان‌تر و قابل استفاده‌تر باشد تبدیل شوند.

همانطور که با بررسی خروجی داده مشخص است، اعداد می‌توانند اندازه بسیار بزرگی داشته باشند. برای تعامل با آن‌ها، ما از `bigint` (پیاده‌سازی اعداد بزرگ در JavaScript) استفاده می‌کنیم. `BigInt` برای کار با اعداد بزرگ‌تر از حداکثر `number` استفاده می‌شود. بیایید از این مثال استفاده کنیم تا بهتر از آنچه که داده‌های ماینینگ برای این فرآیند مورد نیاز است، درک کنیم:

```ts title="./scripts/mine.ts"
// ... previous code

const { stack } = miningData;

const complexity = stack.readBigNumber();
const lastSuccess = stack.readBigNumber();
const seed = stack.readBigNumber();
const targetDelta = stack.readBigNumber();
const minCpl = stack.readBigNumber();
const maxCpl = stack.readBigNumber();

console.log({ complexity, lastSuccess, seed, targetDelta, minCpl, maxCpl });
```

همانطور که در بالا نشان داده شد، اجزای مختلف _miningData_ از اعداد مبتنی بر استک برای پارامترهای مختلف استفاده می‌کنند (که در بخش زیر معرفی خواهند شد). برای رسیدن به مقدار مورد نظر، از تابع `stack.readBigNumber()` برای خواندن یک `bigint` از استک استفاده کردیم.

پس از کامل شدن این فرآیند، می‌توانیم مقادیر را در کنسول چاپ کنیم. دوباره اسکریپت را با اجرای فرمان زیر اجرا کنید:

```bash
npm run start:script
```

اینجا یک نمونه خروجی است:

```bash
{
  complexity: 7237005577332262213973186563042994240829374041602535252466099000494570602496n,
  lastSuccess: 1730818693n,
  seed: 281644526620911853868912633959724884177n,
  targetDelta: 30n,
  minCpl: 171n,
  maxCpl: 252n
}
```

بیایید فرمان داده‌های استخراج را که برای ترجمه پارامترهای مختلف داده هنگام برنامه‌ریزی داده‌های استخراج در بلاکچین TON استفاده می‌شود پوشش دهیم. این شامل موارد زیر است:

- `complexity` مهمترین عدد برای ماینرها است. این میزان پیچیدگی Proof-of-Work برای مقادیر است. اگر _هش نهایی کمتر از complexity باشد_ شما موفق میشوید.
- `lastSuccess` بیانگر تاریخ و زمان آخرین تراکنش ماینینگ در TON با فرمت [یونیکس تایم‌استمپ](https://www.unixtimestamp.com/) است. هر بار که شاخص `last_success` تغییر می‌کند، باید دوباره ماینر را اجرا کنید زیرا در طول این فرآیند، `seed` نیز تغییر می‌کند.
- `seed` یک مقدار منحصربه‌فرد است که توسط یک قرارداد هوشمند برای محاسبه هش مورد نظر تولید می‌شود. برای درک بهتر این فرآیند و کسب اطلاعات بیشتر درباره چگونگی تغییرات seed و دلایل آن، به پوشه فایل‌های پروژه نگاهی بیندازید و از کلیدواژه ctx_seed برای جستجو (Ctrl+F با کلیدواژه "ctx_seed") استفاده کنید.
- `targetDelta`، `minCpl` و `maxCpl` در آموزش ما استفاده نخواهند شد. اما همیشه می‌توانید بیشتر بخوانید چگونه آن‌ها در قراردادهای هوشمند برای محاسبه پیچیدگی اثبات کار در فایل‌های سورس کلکسیون پروژه شما استفاده می‌شوند.

حالا ما پارامترهای مختلف بحث شده در بالا را درک کرده‌ایم، مقادیر (`complexity`، `lastSuccess`، `seed`) که در NFT Miner خود در فصل بعد استفاده خواهیم کرد، را در اختیار داریم.

## 🛠 آماده‌سازی یک NFT Miner

شما دارید کار فوق‌العاده ای انجام می‌دهید!

پس از اتصال به TON و بازیابی داده‌های لازم استخراج از بلاکچین برای ایجاد یک NFT Miner، بیایید بر روی مراحل بعدی این فرآیند تمرکز کنیم تا به هدف خود برسیم.

در این فصل، شما _یک پیام استخراج را آماده می‌کنید_ و _هشی از پیام را محاسبه می‌کنید_. سپس، شما _هشی که کمتر (`<`) از پیچیدگی_ دریافتی از قرارداد هوشمند است را پیدا می‌کنید.

این چیزی است که یک ماینر انجام می‌دهد! ساده نیست؟

### آماده‌سازی پیام‌های استخراج

ابتدا باید با اطمینان از پارامترهای صحیح برای اطمینان از اعتبار و یکپارچگی داده های این فرآیند، یک پیام استخراج آماده کنیم.

خوشبختانه، [فایل README](https://github.com/ton-community/ton-onboarding-challenge#mining-process-deep-dive) به ما امکان می‌دهد تا راهنمایی‌های صحیح مورد نیاز برای دستیابی به این هدف را بدست آوریم. همانطور که می‌بینید، فایل README شامل یک جدول با برخی فیلدها و نوع سلول‌ها (با عنوان “Layout of Proof of Work Cell”) است که در دستیابی به نتیجه مطلوب به ما کمک می‌کند.

:::info سلول چیست؟
سلول(Cell)ها ساختارهای ذخیره‌سازی داده‌ای در TON هستند که برای اهداف زیادی استفاده می‌شوند از جمله افزایش مقیاس‌پذیری شبکه و سرعت تراکنش‌های قراردادهای هوشمند. ما در اینجا به جزئیات نمی‌پردازیم، اما اگر به درک پیچیدگی Cellها و نحوه عملکرد آنها علاقه‌مند هستید، [این بخش](/v3/concepts/dive-into-ton/ton-blockchain/cells-as-data-storage) از مستندات ما را مطالعه کنید.
:::

خوشبختانه، همه ساختارهای داده‌ای که در این آموزش استفاده می‌شوند، قبلاً در TypeScript نوشته شده‌اند. از شیء `MineMessageParams` از _NftGiver.data.ts_ برای ساختن یک تراکنش با _Queries_ استفاده کنید:

```ts title="./scripts/mine.ts"
import { unixNow } from '../lib/utils';
import { MineMessageParams, Queries } from '../wrappers/NftGiver';

// ... previous code

const mineParams: MineMessageParams = {
    expire: unixNow() + 300, // 5 min is enough to make a transaction
    mintTo: walletAddress, // your wallet
    data1: 0n, // temp variable to increment in the miner
    seed // unique seed from get_mining_data
};

let msg = Queries.mine(mineParams); // transaction builder
```

احتمالاً سوالی دارید: _op_ و _data2_ کجای [جدول](https://github.com/ton-community/ton-onboarding-challenge#mining-process-deep-dive) هستند؟

- در جدول، مقدار عددی data1 باید برابر با مقدار data2 باشد. برای صرف نظر از پر کردن مقدار data2، سازنده تراکنش یک فرآیند سطح پایین را اجرا می‌کند (به سورس‌های Queries.mine() مراجعه کنید).
- چون دسته‌بندی `op` همواره ثابت است، قبلاً در _Queries_ و _OpCodes_ سازنده تراکنش اعمال شده است. شما می‌توانید op code را با مراجعه به سورس کد`mine()` پیدا کنید.

:::tip
گرچه ممکن است بررسی سورس کد (`../wrappers/NftGiver.ts`) جالب باشد، اما لازم نیست.
:::

### ایجاد TON NFT Miners

حال که فرآیند آماده‌سازی پیام‌ها برای TON Miner را به پایان رسانده‌ایم، بیایید وارد فرآیند اولیه برای ساخت یک ماینر واقعی شویم. اول، بیایید این خط کد را بررسی کنیم:

```ts
let msg = Queries.mine(mineParams);
```

در بالا یک مقدار `msg` را کمپایل کردیم. ایده استخراج، یافتن یک هش `msg.hash()` است که کمتر از آخرین `complexity` دریافت شده از _get_mining_data()_ باشد. می‌توانیم `data1` را به تعداد دلخواه افزایش دهیم.

ماینر به طور نامحدود ادامه خواهد داد تا زمانی که `msg.hash()` بزرگتر از `complexity` باشد (هش پیام بزرگتر از پیچیدگی استخراج PoW است).

اینجا یک مثال از کدی است که اجرا می‌شود و به `BigInt` در TypeScript مربوط می‌شود:

```ts title="./scripts/mine.ts"
let msg = Queries.mine(mineParams);

const bufferToBigint = (buffer: Buffer) => BigInt('0x' + buffer.toString('hex'));

while (bufferToBigint(msg.hash()) > complexity) {
    mineParams.expire = unixNow() + 300;
    mineParams.data1 += 1n;
    msg = Queries.mine(mineParams);
}

console.log('Yoo-hoo, you found something!');
```

ما هش را از `msg.hash()` به `bigint` با تابع `bufferToBigint()` تبدیل می‌کنیم. این کار برای استفاده از این هش در مقایسه با `complexity` انجام می‌شود.

اگرچه بعد از تکمیل مراحل فوق، miner به‌درستی کار خواهد کرد، اما به‌ظاهر چشم‌نواز نخواهد بود (سعی کنید `npm run start:script` را اجرا کنید). بنابراین، باید به این مسئله رسیدگی کنیم. بیایید شروع کنیم.

#### بهبود ظاهر TON Miner ✨

ما حالا می‌خواهیم ماینر را جذاب کنیم! چگونه این کار را انجام دهیم؟

فقط من را دنبال کن، دوست من، من را دنبال کن.

برای دستیابی به هدفمان، این دستورها را اضافه میکنیم:

```ts title="./scripts/mine.ts"
let msg = Queries.mine(mineParams); // transaction builder
let progress = 0;

const bufferToBigint = (buffer: Buffer) => BigInt('0x' + buffer.toString('hex'));

while (bufferToBigint(msg.hash()) > complexity) {
    console.clear()
    console.log(`Mining started: please, wait for 30-60 seconds to mine your NFT!`)
    console.log()
    console.log(`⛏ Mined ${progress} hashes! Last: `, bufferToBigint(msg.hash()))

    mineParams.expire = unixNow() + 300;
    mineParams.data1 += 1n;
    msg = Queries.mine(mineParams);
}

console.log()
console.log('💎 Mission completed: msg_hash less than pow_complexity found!');
console.log()
console.log('msg_hash:       ', bufferToBigint(msg.hash()))
console.log('pow_complexity: ', complexity)
console.log('msg_hash < pow_complexity: ', bufferToBigint(msg.hash()) < complexity);

return msg;
```

فقط آن را بررسی کن! بیایید فرمان را اجرا کنیم:

```bash
npm run start:script
```

<br></br>
<ThemedImage
    alt=""
    sources={{
        light: '/img/tutorials/onboarding/7.png?raw=true',
        dark: '/img/tutorials/onboarding/7-dark.png?raw=true',
    }}
/>
<br></br>

_باحال نیست؟_ 😏

بعد از اجرای صحیح این دستورها، یک NFT ماینر با ظاهر جالب خواهیم داشت. در بخش بعدی، بر روی اتصال یک کیف پول به ماینر جهت ایجاد یک کانال پرداخت که می‌تواند تراکنش‌ها را از بلاکچین TON دریافت و ارسال کند، تمرکز خواهیم کرد.

## 🎨 آماده‌سازی یک تراکنش

در ادامه مراحل کامپایل یک پیام و ارسال آن به بلاکچین با استفاده از [کیف پول Tonkeeper](https://Tonkeeper.com/) را توضیح خواهیم داد. مراحل آینده شما را در تکمیل فرآیند **ماینینگ یک NFT** بر روی TON راهنمایی خواهند کرد.

#### افزایش موجودی کیف پول از طریق Token Faucet

برای ادامه به مرحله بعد، ما نیاز به دریافت مقداری توکن‌های تست‌نت TON داریم. این را می‌توان با استفاده از [این faucet](https://t.me/testgiver_ton_bot) انجام داد.

### از قابلیت‌های تراکنشی Blueprint استفاده کنید

برای اطمینان از اینکه فرآیند استخراج NFT به‌درستی انجام می‌شود و اینکه کاربر می‌تواند NFT خود را به‌درستی ذخیره کند، از [Blueprint](/v3/documentation/smart-contracts/getting-started/javascript) برای تعامل همزمان با بلاکچین TON و کیف پول Tonkeeper استفاده می‌کنیم.

برای دستیابی به این هدف، از تابع استاندارد `run()` برای اجرا و ارسال تراکنش استفاده خواهیم کرد:

```ts title="./scripts/mine.ts"
import { toNano } from '@ton/ton';
import { NetworkProvider } from '@ton/blueprint';

async function mine() {
  // code from previous steps
}

export async function run(provider: NetworkProvider) {
    // Do not forget to return `msg` from `mine()` function
    const msg = await mine();

    await provider.sender().send({
        to: collectionAddress,
        value: toNano(0.05),
        body: msg
    });
}
```

بیایید اسکریپت بالا را برای ارسال تراکنش اجرا کنیم:

```bash
npm start
```

توجه کنید که ما از `npm start` به جای `npm run start:script` استفاده می‌کنیم. به این دلیل که باید از مزایای blueprint استفاده کنیم (در پس‌زمینه `blueprint run` فراخوانی می‌شود).

پس از اجرای این فرمان، برای اتصال کیف پول Tonkeeper خود به سؤالات نشان‌داده‌شده در زیر پاسخ دهید:

```
? Which network do you want to use?
> testnet
? Which wallet are you using?
> TON Connect compatible mobile wallet (example: Tonkeeper)
? Choose your wallet (Use arrow keys)
> Tonkeeper
```

با استفاده از کیف پول Tonkeeper خود کد QR نشان‌داده‌شده در ترمینال را اسکن کنید تا اتصال برقرار شود، فعلاً هیچ تراکنشی ارسال نمی‌شود.
پس از اتصال، تراکنش را در Tonkeeper تأیید کنید.

آیا در محیط تجربه را حس می‌کنید؟ این شما هستید، در راه تبدیل شدن به یک توسعه‌دهنده TON.

## ⛏  ماینینگ یک NFT با کیف پول

دو روش اصلی برای ماینینگ یک NFT بر روی TON وجود دارد:

- [ساده: ماینینگ NFT Testnet](/v3/guidelines/get-started-with-ton#simple-nft-testnet-mining)
- [اصیل: ماینینگ NFT Mainnet](/v3/guidelines/get-started-with-ton#genuine-nft-mainnet-mining)

### ساده: ماینینگ NFT Testnet

در زیر مراحل لازم برای شروع اولین تراکنش تست‌نت برای ماینینگ NFT شما آمده است:

1. [حالت Testnet را در کیف پول Tonkeeper خود فعال کنید](/v3/concepts/dive-into-ton/ton-ecosystem/wallet-apps#tonkeeper-test-environment)
2. آدرس کیف پول testnet خود را از Tonkeeper به متغیر `walletAddress` در `./scripts/mine.ts` وارد کنید
3. آدرس [کلکسیون NFT از Testnet](https://testnet.getgems.io/collection/EQDk8N7xM5D669LC2YACrseBJtDyFqwtSPCNhRWXU7kjEptX) را به متغیر `collectionAddress` در `./scripts/mine.ts` وارد کنید

#### ماینینگ یک NFT Rocket تست‌نت

برای موفق شدن ماینینگ یک NFT Rocket در تست‌نت، لازم است مراحل زیر را انجام دهید:

1. کیف پول Tonkeeper را بر روی گوشی خود _باز کنید_ (باید تعدادی توکن جدید TON Testnet را داشته باشد).
2. حالت اسکن را در کیف پول برای اسکن کد QR _انتخاب کنید_.
3. ماینر خود را برای دریافت هش صحیح _اجرا_ کنید (این فرآیند بین ۳۰ تا ۶۰ ثانیه طول می‌کشد).
4. مراحل را در دیالوگ Blueprint _دنبال_ کنید.
5. کد QR تولید شده از ماینر را _اسکن کنید_.
6. تراکنش را در کیف پول Tonkeeper خود تأیید کنید.

:::tip نکته پایانی
بدلیل اینکه ممکن است سایر توسعه‌دهندگان در حال تلاش برای انجام همان فرآیند برای ماینینگ NFT خود باشند، شاید نیاز داشته باشید که چند بار این فرآیند را امتحان کنید تا موفق شوید (ممکن است کاربر دیگری قبل از شما، NFT بعدی موجود را ماین کند).
:::

به زودی پس از شروع این فرآیند، شما اولین NFT خود را در TON با موفقیت استخراج خواهید کرد (باید در کیف پول Tonkeeper شما ظاهر شود).

![](/img/tutorials/onboarding/8.svg)

خوش‌آمدید، **یک توسعه‌دهنده واقعی TON**! شما انجامش دادید. 🛳

### اصلی: ماینینگ Mainnet NFT

سلام! برای کسانی که می‌خواهند یک NFT را در TON Mainnet ماین کنند، این دستورها باید رعایت شود:

1. شما حالت _mainnet_ را در Tonkeeper خود فعال کرده‌اید (باید حداقل ۰٫۱ TON داشته باشد).
2. آدرس کیف پول _mainnet_ خود را از Tonkeeper به متغیر `walletAddress` در `./scripts/mine.ts` وارد کنید
3. آدرس [کلکسیون NFT از Mainnet](https://getgems.io/collection/EQDk8N7xM5D669LC2YACrseBJtDyFqwtSPCNhRWXU7kjEptX) را به متغیر `collectionAddress` در `./scripts/mine.ts` وارد کنید
4. **endpoint** را به _Mainnet_ تغییر دهید:

```ts title="./scripts/mine.ts"
// specify endpoint for Mainnet
const endpoint = "https://toncenter.com/api/v2/jsonRPC"
```

#### ماینینگ یک Mainnet NFT Rocket

همانطور که در فرآیند ماینینگ NFT Rocket تست‌نت توضیح دادیم، برای موفقیت در ماینینگ یک NFT Rocket در مین‌نت، باید مراحل زیر را دنبال کنید:

1. کیف پول Tonkeeper را روی گوشی خود _باز کنید_ (به یاد داشته باشید، باید شامل مقداری توکن‌های TON باشد).
2. حالت اسکن را در کیف پول برای اسکن کد QR _انتخاب کنید_.
3. ماینر خود را برای دریافت هش صحیح _اجرا_ کنید (این فرآیند بین ۳۰ تا ۶۰ ثانیه طول می‌کشد).
4. مراحل را در دیالوگ Blueprint دنبال کنید.
5. کد QR تولید شده از ماینر را _اسکن کنید_.
6. تراکنش را در کیف پول Tonkeeper خود تأیید کنید.

:::tip نکته پایانی
بدلیل اینکه ممکن است سایر توسعه‌دهندگان در حال تلاش برای انجام همان فرآیند برای ماینینگ NFT خود باشند، شاید نیاز داشته باشید که چند بار این فرآیند را امتحان کنید تا موفق شوید (ممکن است کاربر دیگری قبل از شما، NFT بعدی موجود را ماین کند).
:::

پس از مدتی، **NFT خود را استخراج خواهید کرد** و به یک توسعه‌دهنده TON در بلاکچین TON تبدیل خواهید شد. مراسم کامل شده است. NFT خود را در Tonkeeper مشاهده کنید.

<div style={{ width: '100%', textAlign: 'center', margin: '0 auto' }}>
  <video width={'300'} style={{ width: '100%', borderRadius: '10pt', margin: '15pt auto' }} muted={true} autoPlay={true} loop={true}>
    <source src="/files/onboarding-nft.mp4" type="video/mp4" />

مرورگر شما از تگ ویدئو پشتیبانی نمی‌کند.

</video>
</div>

خوش‌آمدید، **یک توسعه‌دهنده TON**! شما انجامش دادید. 🛳

## 🧙 مرحله بعد چیست؟

_ابتدا استراحت کنید! شما کار بزرگی کردید! شما اکنون یک توسعه‌دهنده TON هستید. اما این تنها آغاز راهی طولانی است._

## همچنین ببینید

پس از اتمام چالش شروع با TON جایی که موفق به استخراج NFT شدیم، نگاهی به برخی از این مطالب بیندازید که بخش‌های مختلف اکوسیستم را توضیح می‌دهند:

- [بلاکچین چیست؟ قرارداد هوشمند چیست؟ گس چیست؟](https://blog.ton.org/what-is-blockchain)
- [TON Hello World: راهنمای گام‌به‌گام برای نوشتن اولین قرارداد هوشمند](https://ton-community.github.io/tutorials/02-contract/)
- [توسعه قراردادهای هوشمند: مقدمه](/v3/documentation/smart-contracts/overview)
- [[YouTube] TON Dev Study - FunC & Blueprint](https://www.youtube.com/playlist?list=PLyDBPwv9EPsDjIMAF3XqNI2XGNwdcB3sg)
- [چگونه با قراردادهای هوشمند کیف پول کار کنیم](/v3/guidelines/smart-contracts/howto/wallet)
- [سفر FunC: قسمت ۱](https://blog.ton.org/func-journey)
- [ربات فروش پیراشکی](/v3/guidelines/dapps/tutorials/telegram-bot-examples/accept-payments-in-a-telegram-bot-js)
- [اولین Jetton خود را ایجاد کنید](/v3/guidelines/dapps/tutorials/mint-your-first-token)
- [راهنمای گام به گام ساخت کلکسیون NFT](/v3/guidelines/dapps/tutorials/nft-minting-guide)
- [چگونه یک سایت TON را اجرا کنیم](/v3/guidelines/web3/ton-proxy-sites/how-to-run-ton-site)

:::info نظر یا بازخوردی دارید؟
شما یکی از اولین کاوشگران اینجا هستید. اگر هرگونه اشتباه پیدا کردید یا احساس مانع داشتید، لطفاً بازخورد خود را به [@SwiftAdviser](https://t.me/SwiftAdviser) ارسال کنید. من آن را سریعاً درست خواهم کرد! :)
:::
