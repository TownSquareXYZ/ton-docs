import ConceptImage from '@site/src/components/conceptImage'

# تست مینی اپ‌ها

## استفاده از بات‌ها در محیط آزمایشی

برای ورود به محیط آزمایشی، از یکی از روش‌های زیر استفاده کنید:

- **iOS:** روی آیکون تنظیمات ۱۰ بار بزنید > حساب‌ها > ورود به حساب دیگر > تست.
- **Telegram Desktop:** ☰ تنظیمات را باز کنید > Shift + Alt + «افزودن حساب» را راست کلیک کنید و «سرور تست» را انتخاب کنید.
- **macOS:** برای باز کردن منوی دیباگ، ۱۰ بار روی آیکون تنظیمات کلیک کنید، ⌘ + «افزودن حساب» را کلیک کنید و با شماره تلفن وارد شوید.

محیط آزمایشی کاملاً جدا از محیط اصلی است. شما نیازمند ساخت **حساب کاربری جدید** و **بات جدید** با استفاده از `@BotFather` هستید.

پس از دریافت توکن بات خود، درخواست‌ها را با فرمت زیر به API بات ارسال کنید:

`https://api.telegram.org/bot<token>/test/METHOD_NAME`

**توجه:** هنگام کار با محیط آزمایشی، می‌توانید از لینک‌های HTTP بدون TLS برای تست مینی‌اپ خود استفاده کنید.

## حالت دیباگ برای مینی اپ‌ها

با استفاده از ابزارهای زیر، مسائل خاص برنامه در مینی اپ خود را شناسایی کنید:

### اندروید

- [دیباگ USB](https://developer.chrome.com/docs/devtools/remote-debugging/) را در دستگاه خود فعال کنید.
- در تنظیمات تلگرام، به پایین بروید و دوبار روی **شماره نسخه** کلیک کنید و نگه دارید.
- گزینه _فعال کردن دیباگ WebView_ را در تنظیمات دیباگ انتخاب کنید.
- گوشی خود را به کامپیوتر متصل کرده و در کروم chrome://inspect/#devices را باز کنید - وقتی مینی اپ خود را روی گوشی اجرا کردید، آنجا قابل مشاهده خواهد بود.

### iOS

دیباگ کردن webview در iOS نیازمند مرورگر دسکتاپ Safari و در نتیجه یک رایانه macOS است.

**روی دستگاه iOS:**

- به _تنظیمات_ بروید.
- آیکون Safari را پیدا کرده و روی آن کلیک کنید.
- به پایین بروید و روی _پیشرفته_ کلیک کنید.
- گزینه _بازرس وب_ را فعال کنید.

**روی macOS:**

- مرورگر Safari را باز کنید.
- _تنظیمات_ را باز کنید (⌘ + ,).
- تب _پیشرفته_ را انتخاب کنید.
- گزینه _نمایش ویژگی‌ها برای توسعه‌دهندگان وب_ را در پایین بررسی کنید.

**گام‌های بعدی:**

- دستگاه iOS را با کابل به Mac متصل کنید.
- مینی اپ را در کلاینت تلگرام در iOS باز کنید.
- در نوار منو Safari در macOS تب _توسعه_ را باز کنید.
- iPhone متصل شده را انتخاب کنید.
- اختیاری: گزینه _اتصال از طریق شبکه_ را انتخاب کنید و کابل را جدا کنید.
- URL وب‌ویو باز شده را زیر بلاک _Telegram_ انتخاب کنید.

### Telegram Desktop در Windows، لینوکس و macOS

- آخرین نسخه Telegram Desktop را روی **Windows**، **Linux** یا **macOS** دانلود و اجرا کنید (در زمان نوشتن این، نسخه 5.0.1 در دسترس است)
- به _تنظیمات > پیشرفته > تنظیمات آزمایشی > فعال‌سازی بررسی وب‌ویو_ بروید.
- روی Windows و لینوکس، در WebView راست کلیک کنید و _Inspect_ را انتخاب کنید.
- روی macOS، شما باید از طریق [منوی توسعه‌دهنده Safari](https://support.apple.com/en-gb/guide/safari/sfri20948/mac)
  به Inspect دسترسی پیدا کرده و از منوی راست کلیک بازرسی در دسترس نیست

### Telegram macOS

- [نسخه بتا](https://telegram.org/dl/macos/beta) از Telegram macOS را دانلود و اجرا کنید.
- به سرعت ۵ بار روی آیکون تنظیمات کلیک کنید تا منوی دیباگ باز شود و "دیباگ مینی اپ‌ها" را فعال کنید.

در مینی اپ راست کلیک کرده و _Inspect Element_ را انتخاب کنید.

## تست با Eruda

[Eruda](https://github.com/liriliri/eruda) ابزاری است که کنسول مبتنی بر وب برای دیباگ و بررسی صفحات وب در دستگاه‌های موبایل و مرورگرهای دسکتاپ ارائه می‌دهد. در اینجا یک راهنمای گام‌به‌گام درباره چگونگی استفاده از Eruda در پروژه Telegram Mini Apps آمده است.

![1](/img/docs/telegram-apps/eruda-1.png)

### گام ۱: کتابخانه Eruda را اضافه کنید

برای شروع، کتابخانه Eruda را در فایل HTML خود وارد کنید. می‌توانید آن را از یک CDN بارگذاری کنید:

```html
<!-- Include Eruda from CDN (Recommended) -->
<script src="https://cdn.jsdelivr.net/npm/eruda"></script>
```

یا می‌توانید آن را از npm دریافت کنید.

```bash npm2yarn
npm install eruda --save
```

### گام ۲: Eruda را راه‌اندازی کنید

سپس، زمانی که صفحه وب بارگیری می‌شود، Eruda‌ را راه‌اندازی کنید. اگر از Eruda به‌وسیله CDN استفاده می‌کنید، این کار را انجام دهید:

```html
<script src="https://cdn.jsdelivr.net/npm/eruda"></script>
<script>
  // Initialize Eruda
  eruda.init();
</script>

```

اگر ابزارها و بسته‌های مدرن را ترجیح می‌دهید، این اسکریپت را به پروژه خود اضافه کنید:

```jsx
import eruda from 'eruda'

eruda.init()
```

### گام ۳: Eruda را اجرا کنید

پس از استقرار مینی اپ خود، آن را راه‌اندازی کرده و فقط با فشار دادن آیکون Eruda، دیباگ را شروع کنید!

<ConceptImage style={{maxWidth:'200pt', margin: '10pt 20pt 0 0', display: 'flex-box'}} src="/img/docs/telegram-apps/eruda-2.png" />
<ConceptImage style={{maxWidth:'200pt', margin: '10pt 20pt', display: 'flex-box'}}  src="/img/docs/telegram-apps/eruda-3.png" />
